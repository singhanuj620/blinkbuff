<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="navbar.js"></script>
  <link rel="stylesheet" href="/css/adminprofile.css" type="text/css">
  <link href="https://fonts.googleapis.com/css2?family=Gotu&family=Ubuntu:ital,wght@0,300;0,400;0,500;1,300;1,400;1,700&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

  <title>Blink Buff | Admin Panel</title>
</head>
<body>

  <%- include('./partials/navbar') %>

<div class="container">
  <div class="row" style="margin-top: 3%;">
    <div class="col-lg-6 col-md-6 col-sm-6 d-flex justify-content-center">
      <img src="<%=user.thumbnail%>" alt="Admin Profile Image" class="img-fluid img-thumbnail dp">
    </div>
    <div class="col-lg-6 col-md-6 col-sm-6">
      <div class="row">
        <div class="col-lg-12 col-md-12 col-sm-12">
          <p class="username_heading">Admin Name : </p>
        </div>
        <div class="col-lg-12 col-md-12 col-sm-12 d-flex justify-content-center">
          <span class="username_value"><%=user.username%> &nbsp;</span>
          <span class="badge badge-warning  d-flex align-items-center"><%=user.googleid%></span>
        </div>
      </div>
    </div>
  </div>
</div>












<div class="container">
  <div class="row" style="margin-top: 3%;">
    <div class="col-lg-6 col-md-6 col-sm-6 d-flex justify-content-start flex-column">
      <span class="username_heading">Pending Contributions :</span>
    </div>

    <!-- <div class="col-lg-6 col-md-6 col-sm-6 d-flex justify-content-center">
      <button class="btn btn-outline-primary">Add More</button>
    </div> -->
  </div>
  <br>
  <div class="row">
    <div class="col-lg-12 col-md-12 col-sm-12">
      <table class="table table-striped">
  <thead>
    <tr>
      <th scope="col">#</th>
      <th scope="col">Image Preview</th>
      <th scope="col">Image Title</th>
      <th scope="col">Image Author</th>
      <th scope="col">Actions</th>
    </tr>
  </thead>
  <tbody class="table_text">
    <% for (var i = pend_len-1; i >= 0; i--) { -%>

      <% if (pend_images[i].image) { -%>
        <% let temp = pend_images[i].image; %>
        <%  let photo = temp.toString('base64'); %>
        <%  let pic = 'data:image/jpeg;base64,' + photo; %>
        <tr>
          <th scope="row"><%=pend_len-i%></th>
          <td><img class="img_preview" src="<%= pic %>" alt="<%=pend_images[i].title%>"></td>
          <td><%=pend_images[i].title%> ( <%=pend_images[i].size%> KB)</td>
          <td><%=pend_images[i].author%></td>
          <td>
            <div>
              <a href="/view/pending/<%=pend_images[i]._id%>"><button class="btn btn-sm btn-info">View</button></a>
              <span> | </span>
              <form action="/delete/images/<%=pend_images[i].id%>?_method=DELETE" method="POST">
                <button class="btn btn-sm btn-danger" type="submit">Delete</button>
              </form>
            </div>
          </td>
         </tr>
      <% } else { -%>
        <tr>
          <th scope="row"><%=pend_len-i%></th>
          <td><img class="img_preview" src="<%= pend_images[i].img_url %>" alt="<%=pend_images[i].title%>"></td>
          <td><%=pend_images[i].title%> ( <%=pend_images[i].size%> KB)</td>
          <td><%=pend_images[i].author%></td>
          <td>
            <div>
              <a href="/view/pending/<%=pend_images[i]._id%>"><button class="btn btn-sm btn-info">View</button></a>
              <span> | </span>
              <form action="/delete/images/<%=pend_images[i].id%>?_method=DELETE" method="POST">
                <button class="btn btn-sm btn-danger" type="submit">Delete</button>
              </form>
            </div>
          </td>
         </tr>
      <% } -%>
      <!-- end of else loop -->
    <% } -%> 
    <!-- end of for loop -->
  </tbody>
</table>
    </div>
  </div>
</div>



<div class="container">
  <div class="row" style="margin-top: 3%;">
    <div class="col-lg-6 col-md-6 col-sm-6 d-flex justify-content-start flex-column">
      <span class="username_heading">Overall Contributions :</span>
    </div>

    <div class="col-lg-6 col-md-6 col-sm-6 d-flex justify-content-center">
      <a href="/admin/uploadphoto"><button class="btn btn-success">Add More</button></a>
    </div>
  </div>
  <br>
  <div class="row">
    <div class="col-lg-12 col-md-12 col-sm-12">
      <table class="table table-striped">
  <thead>
    <tr>
      <th scope="col">#</th>
      <th scope="col">Image Preview</th>
      <th scope="col">Image Title</th>
      <th scope="col">Image Author</th>
      <th scope="col">Actions</th>
    </tr>
  </thead>
  <tbody class="table_text">
    <% for (var i = len-1; i >= 0; i--) { -%>

      <% if (images[i].image) { -%>
        <% let temp = images[i].image; %>
        <%  let photo = temp.toString('base64'); %>
        <%  let pic = 'data:image/jpeg;base64,' + photo; %>
        <tr>
          <th scope="row"><%=len-i%></th>
          <td><img class="img_preview" src="<%= pic %>" alt="<%=images[i].title%>"></td>
          <td><%=images[i].title%> ( <%=images[i].size%> KB)</td>
          <td><%=images[i].author%></td>
          <td>
            <div>
              <a href="/view/images/<%=images[i]._id%>"><button class="btn btn-sm btn-info">View</button></a>
              <span> | </span>
              <form action="/delete/images/<%=images[i].id%>?_method=DELETE" method="POST">
                <button class="btn btn-sm btn-danger" type="submit">Delete</button>
              </form>
            </div>
          </td>
         </tr>
      <% } else { -%>
        <tr>
          <th scope="row"><%=len-i%></th>
          <td><img class="img_preview" src="<%= images[i].img_url %>" alt="<%=images[i].title%>"></td>
          <td><%=images[i].title%> ( <%=images[i].size%> KB)</td>
          <td><%=images[i].author%></td>
          <td>
            <div>
              <a href="/view/images/<%=images[i]._id%>"><button class="btn btn-sm btn-info">View</button></a>
              <span> | </span>
              <form action="/delete/images/<%=images[i].id%>?_method=DELETE" method="POST">
                <button class="btn btn-sm btn-danger" type="submit">Delete</button>
              </form>
            </div>
          </td>
         </tr>
      <% } -%>
      <!-- end of else loop -->
    <% } -%> 
    <!-- end of for loop -->
  </tbody>
</table>
    </div>
  </div>
</div>





<script src="https://code.jquery.com/jquery-3.4.1.js"
  integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="
  crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script>
</body>
</html>